import{a as Yn,g as $n,b as jn,i as Un,t as kn}from"./web.a3b3781e.js";const Wn="/_astro/rive.2018d9da.wasm";var Bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={exports:{}};(function(wt,qe){(function(oe,G){wt.exports=G()})(Bn,()=>(()=>{var ke=[,(Q,X,Z)=>{Z.r(X),Z.d(X,{default:()=>Xe});var le=(()=>{var re=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(I={}){var c=I,fe,Ce;c.ready=new Promise((t,e)=>{fe=t,Ce=e});function ae(){function t(f){const l=i;r=e=0,i=new Map,l.forEach(p=>{try{p(f)}catch(h){console.error(h)}}),this.Sa(),s&&s.pb()}let e=0,r=0,i=new Map,s=null,u=null;this.requestAnimationFrame=function(f){e||(e=requestAnimationFrame(t.bind(this)));const l=++r;return i.set(l,f),l},this.cancelAnimationFrame=function(f){i.delete(f),e&&i.size==0&&(cancelAnimationFrame(e),e=0)},this.nb=function(f){u&&(document.body.remove(u),u=null),f||(u=document.createElement("div"),u.style.backgroundColor="black",u.style.position="fixed",u.style.right=0,u.style.top=0,u.style.color="white",u.style.padding="4px",u.innerHTML="RIVE FPS",f=function(l){u.innerHTML="RIVE FPS "+l.toFixed(1)},document.body.appendChild(u)),s=new function(){let l=0,p=0;this.pb=function(){var h=performance.now();p?(++l,h-=p,1e3<h&&(f(1e3*l/h),l=p=0)):(p=h,l=0)}}},this.kb=function(){u&&(document.body.remove(u),u=null),s=null},this.Sa=function(){}}function me(t){console.assert(!0);const e=new Map;let r=-1/0;this.push=function(i){return i=i+((1<<t)-1)>>t,e.has(i)&&clearTimeout(e.get(i)),e.set(i,setTimeout(function(){e.delete(i),e.length==0?r=-1/0:i==r&&(r=Math.max(...e.keys()),console.assert(r<i))},1e3)),r=Math.max(i,r),r<<t}}const he="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),Ie=new function(){function t(){if(!e){let B=function(V,M,S){if(M=b.createShader(M),b.shaderSource(M,S),b.compileShader(M),S=b.getShaderInfoLog(M),0<S.length)throw S;b.attachShader(V,M)};var A=document.createElement("canvas"),E={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let b=A.getContext("webgl2",E);if(b)r=2;else if(b=A.getContext("webgl",E))r=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(i=Math.min(b.getParameter(b.MAX_RENDERBUFFER_SIZE),b.getParameter(b.MAX_TEXTURE_SIZE)),A=b.createProgram(),B(A,b.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),B(A,b.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),b.bindAttribLocation(A,0,"vertex"),b.bindAttribLocation(A,1,"uv"),b.linkProgram(A),E=b.getProgramInfoLog(A),0<E.trim().length)throw E;s=b.getUniformLocation(A,"mat"),u=b.getUniformLocation(A,"translate"),b.useProgram(A),b.bindBuffer(b.ARRAY_BUFFER,b.createBuffer()),b.enableVertexAttribArray(0),b.enableVertexAttribArray(1),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,b.createBuffer()),b.uniform1i(b.getUniformLocation(A,"image"),0),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e=b}return!0}let e=null,r=0,i=0,s=null,u=null,f=0,l=0;this.yb=function(){return t(),i},this.ib=function(A){if(!t())return null;const E=e.createTexture();return e.bindTexture(e.TEXTURE_2D,E),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,A),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),r==2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),E};const p=new me(8),h=new me(8),y=new me(10),P=new me(10);this.mb=function(A,E,b,B,V){if(t()){var M=p.push(A),S=h.push(E);(e.canvas.width!=M||e.canvas.height!=S)&&(e.canvas.width=M,e.canvas.height=S),e.viewport(0,S-E,A,E),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST),b.sort((Y,Ue)=>Ue.Wa-Y.Wa),M=y.push(B),f!=M&&(e.bufferData(e.ARRAY_BUFFER,8*M,e.DYNAMIC_DRAW),f=M),M=0;for(var z of b)e.bufferSubData(e.ARRAY_BUFFER,M,z.Fa),M+=4*z.Fa.length;console.assert(M==4*B);for(var ce of b)e.bufferSubData(e.ARRAY_BUFFER,M,ce.Za),M+=4*ce.Za.length;console.assert(M==8*B),M=P.push(V),l!=M&&(e.bufferData(e.ELEMENT_ARRAY_BUFFER,2*M,e.DYNAMIC_DRAW),l=M),z=0;for(var Oe of b)e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,z,Oe.indices),z+=2*Oe.indices.length;console.assert(z==2*V),Oe=0,ce=!0,M=z=0;for(const Y of b){Y.image.Ba!=Oe&&(e.bindTexture(e.TEXTURE_2D,Y.image.fb||null),Oe=Y.image.Ba),Y.Bb?(e.scissor(Y.Ka,S-Y.La-Y.Ra,Y.Ib,Y.Ra),ce=!0):ce&&(e.scissor(0,S-E,A,E),ce=!1),b=2/A;const Ue=-2/E;e.uniform4f(s,Y.qa[0]*b*Y.xa,Y.qa[1]*Ue*Y.ya,Y.qa[2]*b*Y.xa,Y.qa[3]*Ue*Y.ya),e.uniform2f(u,Y.qa[4]*b*Y.xa+b*(Y.Ka-Y.zb*Y.xa)-1,Y.qa[5]*Ue*Y.ya+Ue*(Y.La-Y.Ab*Y.ya)+1),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,M),e.vertexAttribPointer(1,2,e.FLOAT,!1,0,M+4*B),e.drawElements(e.TRIANGLES,Y.indices.length,e.UNSIGNED_SHORT,z),M+=4*Y.Fa.length,z+=2*Y.indices.length}console.assert(M==4*B),console.assert(z==2*V)}},this.canvas=function(){return t()&&e.canvas}};c.onRuntimeInitialized=function(){function t(g){switch(g){case h.srcOver:return"source-over";case h.screen:return"screen";case h.overlay:return"overlay";case h.darken:return"darken";case h.lighten:return"lighten";case h.colorDodge:return"color-dodge";case h.colorBurn:return"color-burn";case h.hardLight:return"hard-light";case h.softLight:return"soft-light";case h.difference:return"difference";case h.exclusion:return"exclusion";case h.multiply:return"multiply";case h.hue:return"hue";case h.saturation:return"saturation";case h.color:return"color";case h.luminosity:return"luminosity"}}function e(g){return"rgba("+((16711680&g)>>>16)+","+((65280&g)>>>8)+","+((255&g)>>>0)+","+((4278190080&g)>>>24)/255+")"}function r(){0<z.length&&(Ie.mb(S.drawWidth(),S.drawHeight(),z,ce,Oe),z=[],Oe=ce=0,S.reset(512,512));for(const g of M){for(const T of g.fa)T();g.fa=[]}M.clear()}var i=c.RenderPaintStyle;const s=c.RenderPath,u=c.RenderPaint,f=c.Renderer,l=c.StrokeCap,p=c.StrokeJoin,h=c.BlendMode,y=i.fill,P=i.stroke,A=c.FillRule.evenOdd;let E=1;var b=c.RenderImage.extend("CanvasRenderImage",{__construct:function(){this.__parent.__construct.call(this),this.Ba=E,E=E+1&2147483647||1},decode:function(g){let T=It;T.total++;var $=this,O=new Image;O.src=URL.createObjectURL(new Blob([g],{type:"image/png"})),O.onload=function(){if($.cb=O,$.fb=Ie.ib(O),$.size(O.width,O.height),T.loaded++,T.loaded===T.total){const x=T.ready;x&&(x(),T.ready=null)}}}}),B=s.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.ka=new Path2D},rewind:function(){this.ka=new Path2D},addPath:function(g,T,$,O,x,W,j){var k=this.ka,pe=k.addPath;g=g.ka;const K=new DOMMatrix;K.a=T,K.b=$,K.c=O,K.d=x,K.e=W,K.f=j,pe.call(k,g,K)},fillRule:function(g){this.Ia=g},moveTo:function(g,T){this.ka.moveTo(g,T)},lineTo:function(g,T){this.ka.lineTo(g,T)},cubicTo:function(g,T,$,O,x,W){this.ka.bezierCurveTo(g,T,$,O,x,W)},close:function(){this.ka.closePath()}}),V=u.extend("CanvasRenderPaint",{color:function(g){this.Ja=e(g)},thickness:function(g){this.gb=g},join:function(g){switch(g){case p.miter:this.Aa="miter";break;case p.round:this.Aa="round";break;case p.bevel:this.Aa="bevel"}},cap:function(g){switch(g){case l.butt:this.za="butt";break;case l.round:this.za="round";break;case l.square:this.za="square"}},style:function(g){this.eb=g},blendMode:function(g){this.bb=t(g)},clearGradient:function(){this.sa=null},linearGradient:function(g,T,$,O){this.sa={Xa:g,Ya:T,Na:$,Oa:O,Ea:[]}},radialGradient:function(g,T,$,O){this.sa={Xa:g,Ya:T,Na:$,Oa:O,Ea:[],wb:!0}},addStop:function(g,T){this.sa.Ea.push({color:g,stop:T})},completeGradient:function(){},draw:function(g,T,$){let O=this.eb;var x=this.Ja,W=this.sa;if(g.globalCompositeOperation=this.bb,W!=null){x=W.Xa;var j=W.Ya;const pe=W.Na;var k=W.Oa;const K=W.Ea;W.wb?(W=pe-x,k-=j,x=g.createRadialGradient(x,j,0,x,j,Math.sqrt(W*W+k*k))):x=g.createLinearGradient(x,j,pe,k);for(let Ee=0,te=K.length;Ee<te;Ee++)j=K[Ee],x.addColorStop(j.stop,e(j.color));this.Ja=x,this.sa=null}switch(O){case P:g.strokeStyle=x,g.lineWidth=this.gb,g.lineCap=this.za,g.lineJoin=this.Aa,g.stroke(T);break;case y:g.fillStyle=x,g.fill(T,$)}}});const M=new Set;let S=null,z=[],ce=0,Oe=0;var Y=c.CanvasRenderer=f.extend("Renderer",{__construct:function(g){this.__parent.__construct.call(this),this.ja=[1,0,0,1,0,0],this.da=g.getContext("2d"),this.Ha=g,this.fa=[]},save:function(){this.ja.push(...this.ja.slice(this.ja.length-6)),this.fa.push(this.da.save.bind(this.da))},restore:function(){const g=this.ja.length-6;if(6>g)throw"restore() called without matching save().";this.ja.splice(g),this.fa.push(this.da.restore.bind(this.da))},transform:function(g,T,$,O,x,W){const j=this.ja,k=j.length-6;j.splice(k,6,j[k]*g+j[k+2]*T,j[k+1]*g+j[k+3]*T,j[k]*$+j[k+2]*O,j[k+1]*$+j[k+3]*O,j[k]*x+j[k+2]*W+j[k+4],j[k+1]*x+j[k+3]*W+j[k+5]),this.fa.push(this.da.transform.bind(this.da,g,T,$,O,x,W))},rotate:function(g){const T=Math.sin(g);g=Math.cos(g),this.transform(g,T,-T,g,0,0)},_drawPath:function(g,T){this.fa.push(T.draw.bind(T,this.da,g.ka,g.Ia===A?"evenodd":"nonzero"))},_drawRiveImage:function(g,T,$){var O=g.cb;if(O){var x=this.da,W=t(T);this.fa.push(function(){x.globalCompositeOperation=W,x.globalAlpha=$,x.drawImage(O,0,0),x.globalAlpha=1})}},_getMatrix:function(g){const T=this.ja,$=T.length-6;for(let O=0;6>O;++O)g[O]=T[$+O]},_drawImageMesh:function(g,T,$,O,x,W,j,k,pe,K){var Ee=this.da.canvas.width,te=this.da.canvas.height;const an=pe-j,on=K-k;j=Math.max(j,0),k=Math.max(k,0),pe=Math.min(pe,Ee),K=Math.min(K,te);const rt=pe-j,it=K-k;if(console.assert(rt<=Math.min(an,Ee)),console.assert(it<=Math.min(on,te)),!(0>=rt||0>=it)){pe=rt<an||it<on,Ee=K=1;var Be=Math.ceil(rt*K),De=Math.ceil(it*Ee);te=Ie.yb(),Be>te&&(K*=te/Be,Be=te),De>te&&(Ee*=te/De,De=te),S||(S=new c.DynamicRectanizer(te),S.reset(512,512)),te=S.addRect(Be,De),0>te&&(r(),M.add(this),te=S.addRect(Be,De),console.assert(0<=te));var sn=te&65535,un=te>>16;z.push({qa:this.ja.slice(this.ja.length-6),image:g,Ka:sn,La:un,zb:j,Ab:k,Ib:Be,Ra:De,xa:K,ya:Ee,Fa:new Float32Array(O),Za:new Float32Array(x),indices:new Uint16Array(W),Bb:pe,Wa:g.Ba<<1|(pe?1:0)}),ce+=O.length,Oe+=W.length;var Qe=this.da,Fn=t(T);this.fa.push(function(){Qe.save(),Qe.resetTransform(),Qe.globalCompositeOperation=Fn,Qe.globalAlpha=$,Qe.drawImage(Ie.canvas(),sn,un,Be,De,j,k,rt,it),Qe.restore()})}},_clipPath:function(g){this.fa.push(this.da.clip.bind(this.da,g.ka,g.Ia===A?"evenodd":"nonzero"))},clear:function(){M.add(this),this.fa.push(this.da.clearRect.bind(this.da,0,0,this.Ha.width,this.Ha.height))},flush:function(){},translate:function(g,T){this.transform(1,0,0,1,g,T)}});c.makeRenderer=function(g){const T=new Y(g),$=T.da;return new Proxy(T,{get(O,x){if(typeof O[x]=="function")return function(...W){return O[x].apply(O,W)};if(typeof $[x]=="function"){if(-1<he.indexOf(x))throw Error("RiveException: Method call to '"+x+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...W){T.fa.push($[x].bind($,...W))}}return O[x]},set(O,x,W){if(x in $)return $[x]=W,!0}})},c.renderFactory={makeRenderPaint:function(){return new V},makeRenderPath:function(){return new B},makeRenderImage:function(){return new b}};let Ue=c.load,It=null;c.load=function(g){return new Promise(function(T){let $=null;It={total:0,loaded:0,ready:function(){T($)}},$=Ue(g),It.total==0&&T($)})},i=new ae,c.requestAnimationFrame=i.requestAnimationFrame.bind(i),c.cancelAnimationFrame=i.cancelAnimationFrame.bind(i),c.enableFPSCounter=i.nb.bind(i),c.disableFPSCounter=i.kb,i.Sa=r,c.cleanup=function(){S&&S.delete()}};var Ze=Object.assign({},c),L="./this.program",D=typeof window=="object",ge=typeof importScripts=="function",J="",Fe,Ye;(D||ge)&&(ge?J=self.location.href:typeof document<"u"&&document.currentScript&&(J=document.currentScript.src),re&&(J=re),J.indexOf("blob:")!==0?J=J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1):J="",ge&&(Ye=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),Fe=(t,e,r)=>{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?e(i.response):r()},i.onerror=r,i.send(null)});var ie=c.print||console.log.bind(console),we=c.printErr||console.error.bind(console);Object.assign(c,Ze),Ze=null,c.thisProgram&&(L=c.thisProgram);var o;c.wasmBinary&&(o=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&Me("no native wasm support detected");var n,a,d=!1,m,v,w,C,F,R,U,q;function ee(){var t=n.buffer;c.HEAP8=m=new Int8Array(t),c.HEAP16=w=new Int16Array(t),c.HEAP32=F=new Int32Array(t),c.HEAPU8=v=new Uint8Array(t),c.HEAPU16=C=new Uint16Array(t),c.HEAPU32=R=new Uint32Array(t),c.HEAPF32=U=new Float32Array(t),c.HEAPF64=q=new Float64Array(t)}var N,Re=[],Pe=[],Ne=[];function at(){var t=c.preRun.shift();Re.unshift(t)}var ye=0,$e=null;function Me(t){throw c.onAbort&&c.onAbort(t),t="Aborted("+t+")",we(t),d=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),Ce(t),t}function He(t){return t.startsWith("data:application/octet-stream;base64,")}var se;if(se="canvas_advanced.wasm",!He(se)){var Ft=se;se=c.locateFile?c.locateFile(Ft,J):J+Ft}function Yt(t){if(t==se&&o)return new Uint8Array(o);if(Ye)return Ye(t);throw"both async and sync fetching of the wasm failed"}function fn(t){if(!o&&(D||ge)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(()=>Yt(t));if(Fe)return new Promise((e,r)=>{Fe(t,i=>e(new Uint8Array(i)),r)})}return Promise.resolve().then(()=>Yt(t))}function $t(t,e,r){return fn(t).then(i=>WebAssembly.instantiate(i,e)).then(i=>i).then(r,i=>{we("failed to asynchronously prepare wasm: "+i),Me(i)})}function hn(t,e){var r=se;return o||typeof WebAssembly.instantiateStreaming!="function"||He(r)||r.startsWith("file://")||typeof fetch!="function"?$t(r,t,e):fetch(r,{credentials:"same-origin"}).then(i=>WebAssembly.instantiateStreaming(i,t).then(e,function(s){return we("wasm streaming compile failed: "+s),we("falling back to ArrayBuffer instantiation"),$t(r,t,e)}))}var Rt=t=>{for(;0<t.length;)t.shift()(c)};function jt(t){if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var e=t.charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t}function ot(t,e){return t=jt(t),{[t]:function(){return e.apply(this,arguments)}}[t]}function Ut(){this.la=[void 0],this.Qa=[]}var de=new Ut,Ve=void 0;function _(t){throw new Ve(t)}var be=t=>(t||_("Cannot use deleted val. handle = "+t),de.get(t).value),Ae=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return de.ab({Va:1,value:t})}};function kt(t){var e=Error,r=ot(t,function(i){this.name=t,this.message=i,i=Error(i).stack,i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r}var Wt=void 0,Bt=void 0;function H(t){for(var e="";v[t];)e+=Bt[v[t++]];return e}var Ke=[];function Pt(){for(;Ke.length;){var t=Ke.pop();t.Y.pa=!1,t.delete()}}var Je=void 0,_e={};function At(t,e){for(e===void 0&&_("ptr should not be undefined");t.ba;)e=t.ta(e),t=t.ba;return e}var We={};function Dt(t){t=nn(t);var e=H(t);return Se(t),e}function et(t,e){var r=We[t];return r===void 0&&_(e+" has unknown type "+Dt(t)),r}function st(){}var Tt=!1;function Xt(t){--t.count.value,t.count.value===0&&(t.ea?t.ha.ma(t.ea):t.aa.Z.ma(t.$))}function Zt(t,e,r){return e===r?t:r.ba===void 0?null:(t=Zt(t,e,r.ba),t===null?null:r.lb(t))}var Nt={};function dn(t,e){return e=At(t,e),_e[e]}var Ht=void 0;function ut(t){throw new Ht(t)}function ct(t,e){return e.aa&&e.$||ut("makeClassHandle requires ptr and ptrType"),!!e.ha!=!!e.ea&&ut("Both smartPtrType and smartPtr must be specified"),e.count={value:1},ze(Object.create(t,{Y:{value:e}}))}function ze(t){return typeof FinalizationRegistry>"u"?(ze=e=>e,t):(Tt=new FinalizationRegistry(e=>{Xt(e.Y)}),ze=e=>{var r=e.Y;return r.ea&&Tt.register(e,{Y:r},e),e},st=e=>{Tt.unregister(e)},ze(t))}var lt={};function tt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function nt(t){return this.fromWireType(F[t>>2])}var Ge={},ft={};function ue(t,e,r){function i(l){l=r(l),l.length!==t.length&&ut("Mismatched type converter count");for(var p=0;p<t.length;++p)Te(t[p],l[p])}t.forEach(function(l){ft[l]=e});var s=Array(e.length),u=[],f=0;e.forEach((l,p)=>{We.hasOwnProperty(l)?s[p]=We[l]:(u.push(l),Ge.hasOwnProperty(l)||(Ge[l]=[]),Ge[l].push(()=>{s[p]=We[l],++f,f===u.length&&i(s)}))}),u.length===0&&i(s)}function ht(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${t}`)}}function pn(t,e,r={}){var i=e.name;if(t||_(`type "${i}" must have a positive integer typeid pointer`),We.hasOwnProperty(t)){if(r.vb)return;_(`Cannot register type '${i}' twice`)}We[t]=e,delete ft[t],Ge.hasOwnProperty(t)&&(e=Ge[t],delete Ge[t],e.forEach(s=>s()))}function Te(t,e,r={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");pn(t,e,r)}function Et(t){_(t.Y.aa.Z.name+" instance already deleted")}function je(){}function Ct(t,e,r){if(t[e].ca===void 0){var i=t[e];t[e]=function(){return t[e].ca.hasOwnProperty(arguments.length)||_(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[e].ca})!`),t[e].ca[arguments.length].apply(this,arguments)},t[e].ca=[],t[e].ca[i.oa]=i}}function Mt(t,e,r){c.hasOwnProperty(t)?((r===void 0||c[t].ca!==void 0&&c[t].ca[r]!==void 0)&&_(`Cannot register public name '${t}' twice`),Ct(c,t,t),c.hasOwnProperty(r)&&_(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),c[t].ca[r]=e):(c[t]=e,r!==void 0&&(c[t].Jb=r))}function vn(t,e,r,i,s,u,f,l){this.name=t,this.constructor=e,this.ia=r,this.ma=i,this.ba=s,this.qb=u,this.ta=f,this.lb=l,this.Ta=[]}function dt(t,e,r){for(;e!==r;)e.ta||_(`Expected null or instance of ${r.name}, got an instance of ${e.name}`),t=e.ta(t),e=e.ba;return t}function mn(t,e){return e===null?(this.Ca&&_(`null is not a valid ${this.name}`),0):(e.Y||_(`Cannot pass "${xt(e)}" as a ${this.name}`),e.Y.$||_(`Cannot pass deleted object as a pointer of type ${this.name}`),dt(e.Y.$,e.Y.aa.Z,this.Z))}function gn(t,e){if(e===null){if(this.Ca&&_(`null is not a valid ${this.name}`),this.wa){var r=this.Da();return t!==null&&t.push(this.ma,r),r}return 0}if(e.Y||_(`Cannot pass "${xt(e)}" as a ${this.name}`),e.Y.$||_(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.va&&e.Y.aa.va&&_(`Cannot convert argument of type ${e.Y.ha?e.Y.ha.name:e.Y.aa.name} to parameter type ${this.name}`),r=dt(e.Y.$,e.Y.aa.Z,this.Z),this.wa)switch(e.Y.ea===void 0&&_("Passing raw pointer to smart pointer is illegal"),this.Hb){case 0:e.Y.ha===this?r=e.Y.ea:_(`Cannot convert argument of type ${e.Y.ha?e.Y.ha.name:e.Y.aa.name} to parameter type ${this.name}`);break;case 1:r=e.Y.ea;break;case 2:if(e.Y.ha===this)r=e.Y.ea;else{var i=e.clone();r=this.Db(r,Ae(function(){i.delete()})),t!==null&&t.push(this.ma,r)}break;default:_("Unsupporting sharing policy")}return r}function yn(t,e){return e===null?(this.Ca&&_(`null is not a valid ${this.name}`),0):(e.Y||_(`Cannot pass "${xt(e)}" as a ${this.name}`),e.Y.$||_(`Cannot pass deleted object as a pointer of type ${this.name}`),e.Y.aa.va&&_(`Cannot convert argument of type ${e.Y.aa.name} to parameter type ${this.name}`),dt(e.Y.$,e.Y.aa.Z,this.Z))}function xe(t,e,r,i){this.name=t,this.Z=e,this.Ca=r,this.va=i,this.wa=!1,this.ma=this.Db=this.Da=this.Ua=this.Hb=this.Cb=void 0,e.ba!==void 0?this.toWireType=gn:(this.toWireType=i?mn:yn,this.ga=null)}function Vt(t,e,r){c.hasOwnProperty(t)||ut("Replacing nonexistant public symbol"),c[t].ca!==void 0&&r!==void 0?c[t].ca[r]=e:(c[t]=e,c[t].oa=r)}var bn=(t,e)=>{var r=[];return function(){if(r.length=0,Object.assign(r,arguments),t.includes("j")){var i=c["dynCall_"+t];i=r&&r.length?i.apply(null,[e].concat(r)):i.call(null,e)}else i=N.get(e).apply(null,r);return i}};function ne(t,e){t=H(t);var r=t.includes("j")?bn(t,e):N.get(e);return typeof r!="function"&&_(`unknown function pointer with signature ${t}: ${e}`),r}var zt=void 0;function Le(t,e){function r(u){s[u]||We[u]||(ft[u]?ft[u].forEach(r):(i.push(u),s[u]=!0))}var i=[],s={};throw e.forEach(r),new zt(`${t}: `+i.map(Dt).join([", "]))}function pt(t,e,r,i,s){var u=e.length;2>u&&_("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=e[1]!==null&&r!==null,l=!1;for(r=1;r<e.length;++r)if(e[r]!==null&&e[r].ga===void 0){l=!0;break}var p=e[0].name!=="void",h=u-2,y=Array(h),P=[],A=[];return function(){if(arguments.length!==h&&_(`function ${t} called with ${arguments.length} arguments, expected ${h} args!`),A.length=0,P.length=f?2:1,P[0]=s,f){var E=e[1].toWireType(A,this);P[1]=E}for(var b=0;b<h;++b)y[b]=e[b+2].toWireType(A,arguments[b]),P.push(y[b]);if(b=i.apply(null,P),l)tt(A);else for(var B=f?1:2;B<e.length;B++){var V=B===1?E:y[B-2];e[B].ga!==null&&e[B].ga(V)}return E=p?e[0].fromWireType(b):void 0,E}}function vt(t,e){for(var r=[],i=0;i<t;i++)r.push(R[e+4*i>>2]);return r}function Gt(t,e,r){return t instanceof Object||_(`${r} with invalid "this": ${t}`),t instanceof e.Z.constructor||_(`${r} incompatible with "this" of type ${t.constructor.name}`),t.Y.$||_(`cannot call emscripten binding method ${r} on deleted object`),dt(t.Y.$,t.Y.aa.Z,e.Z)}function _t(t){t>=de.Ga&&--de.get(t).Va===0&&de.$a(t)}function wn(t,e,r){switch(e){case 0:return function(i){return this.fromWireType((r?m:v)[i])};case 1:return function(i){return this.fromWireType((r?w:C)[i>>1])};case 2:return function(i){return this.fromWireType((r?F:R)[i>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function xt(t){if(t===null)return"null";var e=typeof t;return e==="object"||e==="array"||e==="function"?t.toString():""+t}function Rn(t,e){switch(e){case 2:return function(r){return this.fromWireType(U[r>>2])};case 3:return function(r){return this.fromWireType(q[r>>3])};default:throw new TypeError("Unknown float type: "+t)}}function Pn(t,e,r){switch(e){case 0:return r?function(i){return m[i]}:function(i){return v[i]};case 1:return r?function(i){return w[i>>1]}:function(i){return C[i>>1]};case 2:return r?function(i){return F[i>>2]}:function(i){return R[i>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var Qt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,qt=(t,e,r)=>{var i=e+r;for(r=e;t[r]&&!(r>=i);)++r;if(16<r-e&&t.buffer&&Qt)return Qt.decode(t.subarray(e,r));for(i="";e<r;){var s=t[e++];if(s&128){var u=t[e++]&63;if((s&224)==192)i+=String.fromCharCode((s&31)<<6|u);else{var f=t[e++]&63;s=(s&240)==224?(s&15)<<12|u<<6|f:(s&7)<<18|u<<12|f<<6|t[e++]&63,65536>s?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else i+=String.fromCharCode(s)}return i},Kt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,An=(t,e)=>{for(var r=t>>1,i=r+e/2;!(r>=i)&&C[r];)++r;if(r<<=1,32<r-t&&Kt)return Kt.decode(v.subarray(t,r));for(r="",i=0;!(i>=e/2);++i){var s=w[t+2*i>>1];if(s==0)break;r+=String.fromCharCode(s)}return r},Tn=(t,e,r)=>{if(r===void 0&&(r=2147483647),2>r)return 0;r-=2;var i=e;r=r<2*t.length?r/2:t.length;for(var s=0;s<r;++s)w[e>>1]=t.charCodeAt(s),e+=2;return w[e>>1]=0,e-i},En=t=>2*t.length,Cn=(t,e)=>{for(var r=0,i="";!(r>=e/4);){var s=F[t+4*r>>2];if(s==0)break;++r,65536<=s?(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023)):i+=String.fromCharCode(s)}return i},Mn=(t,e,r)=>{if(r===void 0&&(r=2147483647),4>r)return 0;var i=e;r=i+r-4;for(var s=0;s<t.length;++s){var u=t.charCodeAt(s);if(55296<=u&&57343>=u){var f=t.charCodeAt(++s);u=65536+((u&1023)<<10)|f&1023}if(F[e>>2]=u,e+=4,e+4>r)break}return F[e>>2]=0,e-i},_n=t=>{for(var e=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);55296<=i&&57343>=i&&++r,e+=4}return e},xn={};function mt(t){var e=xn[t];return e===void 0?H(t):e}var gt=[];function Ln(t){var e=gt.length;return gt.push(t),e}function Sn(t,e){for(var r=Array(t),i=0;i<t;++i)r[i]=et(R[e+4*i>>2],"parameter "+i);return r}var Jt=[],Lt={},en=()=>{if(!St){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:L||"./this.program"},e;for(e in Lt)Lt[e]===void 0?delete t[e]:t[e]=Lt[e];var r=[];for(e in t)r.push(`${e}=${t[e]}`);St=r}return St},St,On=[null,[],[]];Object.assign(Ut.prototype,{get(t){return this.la[t]},has(t){return this.la[t]!==void 0},ab(t){var e=this.Qa.pop()||this.la.length;return this.la[e]=t,e},$a(t){this.la[t]=void 0,this.Qa.push(t)}}),Ve=c.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},de.la.push({value:void 0},{value:null},{value:!0},{value:!1}),de.Ga=de.la.length,c.count_emval_handles=function(){for(var t=0,e=de.Ga;e<de.la.length;++e)de.la[e]!==void 0&&++t;return t},Wt=c.PureVirtualError=kt("PureVirtualError");for(var tn=Array(256),yt=0;256>yt;++yt)tn[yt]=String.fromCharCode(yt);Bt=tn,c.getInheritedInstanceCount=function(){return Object.keys(_e).length},c.getLiveInheritedInstances=function(){var t=[],e;for(e in _e)_e.hasOwnProperty(e)&&t.push(_e[e]);return t},c.flushPendingDeletes=Pt,c.setDelayFunction=function(t){Je=t,Ke.length&&Je&&Je(Pt)},Ht=c.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},je.prototype.isAliasOf=function(t){if(!(this instanceof je&&t instanceof je))return!1;var e=this.Y.aa.Z,r=this.Y.$,i=t.Y.aa.Z;for(t=t.Y.$;e.ba;)r=e.ta(r),e=e.ba;for(;i.ba;)t=i.ta(t),i=i.ba;return e===i&&r===t},je.prototype.clone=function(){if(this.Y.$||Et(this),this.Y.ra)return this.Y.count.value+=1,this;var t=ze,e=Object,r=e.create,i=Object.getPrototypeOf(this),s=this.Y;return t=t(r.call(e,i,{Y:{value:{count:s.count,pa:s.pa,ra:s.ra,$:s.$,aa:s.aa,ea:s.ea,ha:s.ha}}})),t.Y.count.value+=1,t.Y.pa=!1,t},je.prototype.delete=function(){this.Y.$||Et(this),this.Y.pa&&!this.Y.ra&&_("Object already scheduled for deletion"),st(this),Xt(this.Y),this.Y.ra||(this.Y.ea=void 0,this.Y.$=void 0)},je.prototype.isDeleted=function(){return!this.Y.$},je.prototype.deleteLater=function(){return this.Y.$||Et(this),this.Y.pa&&!this.Y.ra&&_("Object already scheduled for deletion"),Ke.push(this),Ke.length===1&&Je&&Je(Pt),this.Y.pa=!0,this},xe.prototype.rb=function(t){return this.Ua&&(t=this.Ua(t)),t},xe.prototype.Ma=function(t){this.ma&&this.ma(t)},xe.prototype.argPackAdvance=8,xe.prototype.readValueFromPointer=nt,xe.prototype.deleteObject=function(t){t!==null&&t.delete()},xe.prototype.fromWireType=function(t){function e(){return this.wa?ct(this.Z.ia,{aa:this.Cb,$:r,ha:this,ea:t}):ct(this.Z.ia,{aa:this,$:t})}var r=this.rb(t);if(!r)return this.Ma(t),null;var i=dn(this.Z,r);if(i!==void 0)return i.Y.count.value===0?(i.Y.$=r,i.Y.ea=t,i.clone()):(i=i.clone(),this.Ma(t),i);if(i=this.Z.qb(r),i=Nt[i],!i)return e.call(this);i=this.va?i.hb:i.pointerType;var s=Zt(r,this.Z,i.Z);return s===null?e.call(this):this.wa?ct(i.Z.ia,{aa:i,$:s,ha:this,ea:t}):ct(i.Z.ia,{aa:i,$:s})},zt=c.UnboundTypeError=kt("UnboundTypeError");var In={L:function(t,e,r){t=H(t),e=et(e,"wrapper"),r=be(r);var i=[].slice,s=e.Z,u=s.ia,f=s.ba.ia,l=s.ba.constructor;t=ot(t,function(){s.ba.Ta.forEach(function(h){if(this[h]===f[h])throw new Wt(`Pure virtual function ${h} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:u}),this.__construct.apply(this,i.call(arguments))}),u.__construct=function(){this===u&&_("Pass correct 'this' to __construct");var h=l.implement.apply(void 0,[this].concat(i.call(arguments)));st(h);var y=h.Y;h.notifyOnDestruction(),y.ra=!0,Object.defineProperties(this,{Y:{value:y}}),ze(this),h=y.$,h=At(s,h),_e.hasOwnProperty(h)?_(`Tried to register registered instance: ${h}`):_e[h]=this},u.__destruct=function(){this===u&&_("Pass correct 'this' to __destruct"),st(this);var h=this.Y.$;h=At(s,h),_e.hasOwnProperty(h)?delete _e[h]:_(`Tried to unregister unregistered instance: ${h}`)},t.prototype=Object.create(u);for(var p in r)t.prototype[p]=r[p];return Ae(t)},N:function(t){var e=lt[t];delete lt[t];var r=e.Da,i=e.ma,s=e.Pa,u=s.map(f=>f.ub).concat(s.map(f=>f.Fb));ue([t],u,f=>{var l={};return s.forEach((p,h)=>{var y=f[h],P=p.sb,A=p.tb,E=f[h+s.length],b=p.Eb,B=p.Gb;l[p.ob]={read:V=>y.fromWireType(P(A,V)),write:(V,M)=>{var S=[];b(B,V,E.toWireType(S,M)),tt(S)}}}),[{name:e.name,fromWireType:function(p){var h={},y;for(y in l)h[y]=l[y].read(p);return i(p),h},toWireType:function(p,h){for(var y in l)if(!(y in h))throw new TypeError(`Missing field: "${y}"`);var P=r();for(y in l)l[y].write(P,h[y]);return p!==null&&p.push(i,P),P},argPackAdvance:8,readValueFromPointer:nt,ga:i}]})},C:function(){},J:function(t,e,r,i,s){var u=ht(r);e=H(e),Te(t,{name:e,fromWireType:function(f){return!!f},toWireType:function(f,l){return l?i:s},argPackAdvance:8,readValueFromPointer:function(f){if(r===1)var l=m;else if(r===2)l=w;else if(r===4)l=F;else throw new TypeError("Unknown boolean type size: "+e);return this.fromWireType(l[f>>u])},ga:null})},f:function(t,e,r,i,s,u,f,l,p,h,y,P,A){y=H(y),u=ne(s,u),l&&(l=ne(f,l)),h&&(h=ne(p,h)),A=ne(P,A);var E=jt(y);Mt(E,function(){Le(`Cannot construct ${y} due to unbound types`,[i])}),ue([t,e,r],i?[i]:[],function(b){if(b=b[0],i)var B=b.Z,V=B.ia;else V=je.prototype;b=ot(E,function(){if(Object.getPrototypeOf(this)!==M)throw new Ve("Use 'new' to construct "+y);if(S.na===void 0)throw new Ve(y+" has no accessible constructor");var ce=S.na[arguments.length];if(ce===void 0)throw new Ve(`Tried to invoke ctor of ${y} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(S.na).toString()}) parameters instead!`);return ce.apply(this,arguments)});var M=Object.create(V,{constructor:{value:b}});b.prototype=M;var S=new vn(y,b,M,A,B,u,l,h);S.ba&&(S.ba.ua===void 0&&(S.ba.ua=[]),S.ba.ua.push(S)),B=new xe(y,S,!0,!1),V=new xe(y+"*",S,!1,!1);var z=new xe(y+" const*",S,!1,!0);return Nt[t]={pointerType:V,hb:z},Vt(E,b),[B,V,z]})},l:function(t,e,r,i,s,u,f){var l=vt(r,i);e=H(e),u=ne(s,u),ue([],[t],function(p){function h(){Le(`Cannot call ${y} due to unbound types`,l)}p=p[0];var y=`${p.name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var P=p.Z.constructor;return P[e]===void 0?(h.oa=r-1,P[e]=h):(Ct(P,e,y),P[e].ca[r-1]=h),ue([],l,function(A){if(A=pt(y,[A[0],null].concat(A.slice(1)),null,u,f),P[e].ca===void 0?(A.oa=r-1,P[e]=A):P[e].ca[r-1]=A,p.Z.ua)for(const E of p.Z.ua)E.constructor.hasOwnProperty(e)||(E.constructor[e]=A);return[]}),[]})},w:function(t,e,r,i,s,u,f,l){e=H(e),u=ne(s,u),ue([],[t],function(p){p=p[0];var h=`${p.name}.${e}`,y={get(){Le(`Cannot access ${h} due to unbound types`,[r])},enumerable:!0,configurable:!0};return y.set=l?()=>{Le(`Cannot access ${h} due to unbound types`,[r])}:()=>{_(`${h} is a read-only property`)},Object.defineProperty(p.Z.constructor,e,y),ue([],[r],function(P){P=P[0];var A={get(){return P.fromWireType(u(i))},enumerable:!0};return l&&(l=ne(f,l),A.set=E=>{var b=[];l(i,P.toWireType(b,E)),tt(b)}),Object.defineProperty(p.Z.constructor,e,A),[]}),[]})},r:function(t,e,r,i,s,u){var f=vt(e,r);s=ne(i,s),ue([],[t],function(l){l=l[0];var p=`constructor ${l.name}`;if(l.Z.na===void 0&&(l.Z.na=[]),l.Z.na[e-1]!==void 0)throw new Ve(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${l.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return l.Z.na[e-1]=()=>{Le(`Cannot construct ${l.name} due to unbound types`,f)},ue([],f,function(h){return h.splice(1,0,null),l.Z.na[e-1]=pt(p,h,null,s,u),[]}),[]})},b:function(t,e,r,i,s,u,f,l){var p=vt(r,i);e=H(e),u=ne(s,u),ue([],[t],function(h){function y(){Le(`Cannot call ${P} due to unbound types`,p)}h=h[0];var P=`${h.name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),l&&h.Z.Ta.push(e);var A=h.Z.ia,E=A[e];return E===void 0||E.ca===void 0&&E.className!==h.name&&E.oa===r-2?(y.oa=r-2,y.className=h.name,A[e]=y):(Ct(A,e,P),A[e].ca[r-2]=y),ue([],p,function(b){return b=pt(P,b,h,u,f),A[e].ca===void 0?(b.oa=r-2,A[e]=b):A[e].ca[r-2]=b,[]}),[]})},e:function(t,e,r,i,s,u,f,l,p,h){e=H(e),s=ne(i,s),ue([],[t],function(y){y=y[0];var P=`${y.name}.${e}`,A={get(){Le(`Cannot access ${P} due to unbound types`,[r,f])},enumerable:!0,configurable:!0};return A.set=p?()=>{Le(`Cannot access ${P} due to unbound types`,[r,f])}:()=>{_(P+" is a read-only property")},Object.defineProperty(y.Z.ia,e,A),ue([],p?[r,f]:[r],function(E){var b=E[0],B={get(){var M=Gt(this,y,P+" getter");return b.fromWireType(s(u,M))},enumerable:!0};if(p){p=ne(l,p);var V=E[1];B.set=function(M){var S=Gt(this,y,P+" setter"),z=[];p(h,S,V.toWireType(z,M)),tt(z)}}return Object.defineProperty(y.Z.ia,e,B),[]}),[]})},I:function(t,e){e=H(e),Te(t,{name:e,fromWireType:function(r){var i=be(r);return _t(r),i},toWireType:function(r,i){return Ae(i)},argPackAdvance:8,readValueFromPointer:nt,ga:null})},o:function(t,e,r,i){function s(){}r=ht(r),e=H(e),s.values={},Te(t,{name:e,constructor:s,fromWireType:function(u){return this.constructor.values[u]},toWireType:function(u,f){return f.value},argPackAdvance:8,readValueFromPointer:wn(e,r,i),ga:null}),Mt(e,s)},c:function(t,e,r){var i=et(t,"enum");e=H(e),t=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:ot(`${i.name}_${e}`,function(){})}}),t.values[r]=i,t[e]=i},y:function(t,e,r){r=ht(r),e=H(e),Te(t,{name:e,fromWireType:function(i){return i},toWireType:function(i,s){return s},argPackAdvance:8,readValueFromPointer:Rn(e,r),ga:null})},t:function(t,e,r,i,s,u){var f=vt(e,r);t=H(t),s=ne(i,s),Mt(t,function(){Le(`Cannot call ${t} due to unbound types`,f)},e-1),ue([],f,function(l){return Vt(t,pt(t,[l[0],null].concat(l.slice(1)),null,s,u),e-1),[]})},k:function(t,e,r,i,s){e=H(e),s===-1&&(s=4294967295),s=ht(r);var u=l=>l;if(i===0){var f=32-8*r;u=l=>l<<f>>>f}r=e.includes("unsigned")?function(l,p){return p>>>0}:function(l,p){return p},Te(t,{name:e,fromWireType:u,toWireType:r,argPackAdvance:8,readValueFromPointer:Pn(e,s,i!==0),ga:null})},g:function(t,e,r){function i(u){u>>=2;var f=R;return new s(f.buffer,f[u+1],f[u])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];r=H(r),Te(t,{name:r,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{vb:!0})},z:function(t,e){e=H(e);var r=e==="std::string";Te(t,{name:e,fromWireType:function(i){var s=R[i>>2],u=i+4;if(r)for(var f=u,l=0;l<=s;++l){var p=u+l;if(l==s||v[p]==0){if(f=f?qt(v,f,p-f):"",h===void 0)var h=f;else h+=String.fromCharCode(0),h+=f;f=p+1}}else{for(h=Array(s),l=0;l<s;++l)h[l]=String.fromCharCode(v[u+l]);h=h.join("")}return Se(i),h},toWireType:function(i,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var u,f=typeof s=="string";f||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||_("Cannot pass non-string to std::string");var l;if(r&&f)for(u=l=0;u<s.length;++u){var p=s.charCodeAt(u);127>=p?l++:2047>=p?l+=2:55296<=p&&57343>=p?(l+=4,++u):l+=3}else l=s.length;if(u=l,l=Ot(4+u+1),p=l+4,R[l>>2]=u,r&&f){if(f=p,p=u+1,u=v,0<p){p=f+p-1;for(var h=0;h<s.length;++h){var y=s.charCodeAt(h);if(55296<=y&&57343>=y){var P=s.charCodeAt(++h);y=65536+((y&1023)<<10)|P&1023}if(127>=y){if(f>=p)break;u[f++]=y}else{if(2047>=y){if(f+1>=p)break;u[f++]=192|y>>6}else{if(65535>=y){if(f+2>=p)break;u[f++]=224|y>>12}else{if(f+3>=p)break;u[f++]=240|y>>18,u[f++]=128|y>>12&63}u[f++]=128|y>>6&63}u[f++]=128|y&63}}u[f]=0}}else if(f)for(f=0;f<u;++f)h=s.charCodeAt(f),255<h&&(Se(p),_("String has UTF-16 code units that do not fit in 8 bits")),v[p+f]=h;else for(f=0;f<u;++f)v[p+f]=s[f];return i!==null&&i.push(Se,l),l},argPackAdvance:8,readValueFromPointer:nt,ga:function(i){Se(i)}})},v:function(t,e,r){if(r=H(r),e===2)var i=An,s=Tn,u=En,f=()=>C,l=1;else e===4&&(i=Cn,s=Mn,u=_n,f=()=>R,l=2);Te(t,{name:r,fromWireType:function(p){for(var h=R[p>>2],y=f(),P,A=p+4,E=0;E<=h;++E){var b=p+4+E*e;(E==h||y[b>>l]==0)&&(A=i(A,b-A),P===void 0?P=A:(P+=String.fromCharCode(0),P+=A),A=b+e)}return Se(p),P},toWireType:function(p,h){typeof h!="string"&&_(`Cannot pass non-string to C++ string type ${r}`);var y=u(h),P=Ot(4+y+e);return R[P>>2]=y>>l,s(h,P+4,y+e),p!==null&&p.push(Se,P),P},argPackAdvance:8,readValueFromPointer:nt,ga:function(p){Se(p)}})},P:function(t,e,r,i,s,u){lt[t]={name:H(e),Da:ne(r,i),ma:ne(s,u),Pa:[]}},O:function(t,e,r,i,s,u,f,l,p,h){lt[t].Pa.push({ob:H(e),ub:r,sb:ne(i,s),tb:u,Fb:f,Eb:ne(l,p),Gb:h})},K:function(t,e){e=H(e),Te(t,{xb:!0,name:e,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},u:function(t,e,r){t=be(t),e=et(e,"emval::as");var i=[],s=Ae(i);return R[r>>2]=s,e.toWireType(i,t)},A:function(t,e,r,i,s){t=gt[t],e=be(e),r=mt(r);var u=[];return R[i>>2]=Ae(u),t(e,r,u,s)},i:function(t,e,r,i){t=gt[t],e=be(e),r=mt(r),t(e,r,null,i)},d:_t,h:function(t,e){var r=Sn(t,e),i=r[0];e=i.name+"_$"+r.slice(1).map(function(f){return f.name}).join("_")+"$";var s=Jt[e];if(s!==void 0)return s;var u=Array(t-1);return s=Ln((f,l,p,h)=>{for(var y=0,P=0;P<t-1;++P)u[P]=r[P+1].readValueFromPointer(h+y),y+=r[P+1].argPackAdvance;for(f=f[l].apply(f,u),P=0;P<t-1;++P)r[P+1].jb&&r[P+1].jb(u[P]);if(!i.xb)return i.toWireType(p,f)}),Jt[e]=s},s:function(t){return t=mt(t),Ae(c[t])},M:function(t,e){return t=be(t),e=be(e),Ae(t[e])},n:function(t){4<t&&(de.get(t).Va+=1)},m:function(t){return Ae(mt(t))},x:function(){return Ae({})},p:function(t){var e=be(t);tt(e),_t(t)},j:function(t,e,r){t=be(t),e=be(e),r=be(r),t[e]=r},q:function(t,e){return t=et(t,"_emval_take_value"),t=t.readValueFromPointer(e),Ae(t)},a:()=>{Me("")},D:t=>{var e=v.length;if(t>>>=0,2147483648<t)return!1;for(var r=1;4>=r;r*=2){var i=e*(1+.2/r);i=Math.min(i,t+100663296);var s=Math;i=Math.max(t,i);e:{s=s.min.call(s,2147483648,i+(65536-i%65536)%65536)-n.buffer.byteLength+65535>>>16;try{n.grow(s),ee();var u=1;break e}catch{}u=void 0}if(u)return!0}return!1},E:(t,e)=>{var r=0;return en().forEach(function(i,s){var u=e+r;for(s=R[t+4*s>>2]=u,u=0;u<i.length;++u)m[s++>>0]=i.charCodeAt(u);m[s>>0]=0,r+=i.length+1}),0},F:(t,e)=>{var r=en();R[t>>2]=r.length;var i=0;return r.forEach(function(s){i+=s.length+1}),R[e>>2]=i,0},G:()=>52,B:function(){return 70},H:(t,e,r,i)=>{for(var s=0,u=0;u<r;u++){var f=R[e>>2],l=R[e+4>>2];e+=8;for(var p=0;p<l;p++){var h=v[f+p],y=On[t];h===0||h===10?((t===1?ie:we)(qt(y,0)),y.length=0):y.push(h)}s+=l}return R[i>>2]=s,0}};(function(){function t(r){if(a=r=r.exports,n=a.Q,ee(),N=a.W,Pe.unshift(a.R),ye--,c.monitorRunDependencies&&c.monitorRunDependencies(ye),ye==0&&$e){var i=$e;$e=null,i()}return r}var e={a:In};if(ye++,c.monitorRunDependencies&&c.monitorRunDependencies(ye),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(r){we("Module.instantiateWasm callback failed with error: "+r),Ce(r)}return hn(e,function(r){t(r.instance)}).catch(Ce),{}})();var Se=t=>(Se=a.S)(t),Ot=t=>(Ot=a.T)(t),nn=t=>(nn=a.U)(t);c.__embind_initialize_bindings=()=>(c.__embind_initialize_bindings=a.V)(),c.dynCall_jiji=(t,e,r,i,s)=>(c.dynCall_jiji=a.X)(t,e,r,i,s);var bt;$e=function t(){bt||rn(),bt||($e=t)};function rn(){function t(){if(!bt&&(bt=!0,c.calledRun=!0,!d)){if(Rt(Pe),fe(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();Ne.unshift(e)}Rt(Ne)}}if(!(0<ye)){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)at();Rt(Re),0<ye||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),t()},1)):t())}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return rn(),I.ready}})();const Xe=le},Q=>{Q.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.4.0","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(Q,X,Z)=>{Z.r(X),Z.d(X,{registerTouchInteractions:()=>le.registerTouchInteractions});var le=Z(4)},(Q,X,Z)=>{Z.r(X),Z.d(X,{registerTouchInteractions:()=>re});var le=void 0,Xe=function(I){var c,fe;return["touchstart","touchmove"].indexOf(I.type)>-1&&(!((c=I.touches)===null||c===void 0)&&c.length)?(I.preventDefault(),{clientX:I.touches[0].clientX,clientY:I.touches[0].clientY}):I.type==="touchend"&&(!((fe=I.changedTouches)===null||fe===void 0)&&fe.length)?{clientX:I.changedTouches[0].clientX,clientY:I.changedTouches[0].clientY}:{clientX:I.clientX,clientY:I.clientY}},re=function(I){var c=I.canvas,fe=I.artboard,Ce=I.stateMachines,ae=Ce===void 0?[]:Ce,me=I.renderer,he=I.rive,Ie=I.fit,Ze=I.alignment;if(!c||!ae.length||!me||!he||!fe||typeof window>"u")return null;var L=function(ge){var J=ge.currentTarget.getBoundingClientRect(),Fe=Xe(ge),Ye=Fe.clientX,ie=Fe.clientY;if(!(!Ye&&!ie)){var we=Ye-J.left,o=ie-J.top,n=he.computeAlignment(Ie,Ze,{minX:0,minY:0,maxX:J.width,maxY:J.height},fe.bounds),a=new he.Mat2D;n.invert(a);var d=new he.Vec2D(we,o),m=he.mapXY(a,d),v=m.x(),w=m.y();switch(m.delete(),a.delete(),d.delete(),n.delete(),ge.type){case"touchmove":case"mouseover":case"mouseout":case"mousemove":{for(var C=0,F=ae;C<F.length;C++){var R=F[C];R.pointerMove(v,w)}break}case"touchstart":case"mousedown":{for(var U=0,q=ae;U<q.length;U++){var R=q[U];R.pointerDown(v,w)}break}case"touchend":case"mouseup":{for(var ee=0,N=ae;ee<N.length;ee++){var R=N[ee];R.pointerUp(v,w)}break}}}},D=L.bind(le);return c.addEventListener("mouseover",D),c.addEventListener("mouseout",D),c.addEventListener("mousemove",D),c.addEventListener("mousedown",D),c.addEventListener("mouseup",D),c.addEventListener("touchmove",D),c.addEventListener("touchstart",D),c.addEventListener("touchend",D),function(){c.removeEventListener("mouseover",D),c.removeEventListener("mouseout",D),c.removeEventListener("mousemove",D),c.removeEventListener("mousedown",D),c.removeEventListener("mouseup",D),c.removeEventListener("touchmove",D),c.removeEventListener("touchstart",D),c.removeEventListener("touchend",D)}}}],oe={};function G(Q){var X=oe[Q];if(X!==void 0)return X.exports;var Z=oe[Q]={exports:{}};return ke[Q](Z,Z.exports,G),Z.exports}G.d=(Q,X)=>{for(var Z in X)G.o(X,Z)&&!G.o(Q,Z)&&Object.defineProperty(Q,Z,{enumerable:!0,get:X[Z]})},G.o=(Q,X)=>Object.prototype.hasOwnProperty.call(Q,X),G.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var ve={};return(()=>{G.r(ve),G.d(ve,{Alignment:()=>I,EventType:()=>L,Fit:()=>re,Layout:()=>c,LoopType:()=>D,Rive:()=>Fe,RiveEventType:()=>he,RuntimeLoader:()=>fe,StateMachineInput:()=>me,StateMachineInputType:()=>ae,Testing:()=>we});var Q=G(1),X=G(2),Z=G(3),le=function(o,n,a,d){function m(v){return v instanceof a?v:new a(function(w){w(v)})}return new(a||(a=Promise))(function(v,w){function C(U){try{R(d.next(U))}catch(q){w(q)}}function F(U){try{R(d.throw(U))}catch(q){w(q)}}function R(U){U.done?v(U.value):m(U.value).then(C,F)}R((d=d.apply(o,n||[])).next())})},Xe=function(o,n){var a={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},d,m,v,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(R){return function(U){return F([R,U])}}function F(R){if(d)throw new TypeError("Generator is already executing.");for(;w&&(w=0,R[0]&&(a=0)),a;)try{if(d=1,m&&(v=R[0]&2?m.return:R[0]?m.throw||((v=m.return)&&v.call(m),0):m.next)&&!(v=v.call(m,R[1])).done)return v;switch(m=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return a.label++,{value:R[1],done:!1};case 5:a.label++,m=R[1],R=[0];continue;case 7:R=a.ops.pop(),a.trys.pop();continue;default:if(v=a.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){a=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){a.label=R[1];break}if(R[0]===6&&a.label<v[1]){a.label=v[1],v=R;break}if(v&&a.label<v[2]){a.label=v[2],a.ops.push(R);break}v[2]&&a.ops.pop(),a.trys.pop();continue}R=n.call(o,a)}catch(U){R=[6,U],m=0}finally{d=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},re;(function(o){o.Cover="cover",o.Contain="contain",o.Fill="fill",o.FitWidth="fitWidth",o.FitHeight="fitHeight",o.None="none",o.ScaleDown="scaleDown"})(re||(re={}));var I;(function(o){o.Center="center",o.TopLeft="topLeft",o.TopCenter="topCenter",o.TopRight="topRight",o.CenterLeft="centerLeft",o.CenterRight="centerRight",o.BottomLeft="bottomLeft",o.BottomCenter="bottomCenter",o.BottomRight="bottomRight"})(I||(I={}));var c=function(){function o(n){var a,d,m,v,w,C;this.fit=(a=n?.fit)!==null&&a!==void 0?a:re.Contain,this.alignment=(d=n?.alignment)!==null&&d!==void 0?d:I.Center,this.minX=(m=n?.minX)!==null&&m!==void 0?m:0,this.minY=(v=n?.minY)!==null&&v!==void 0?v:0,this.maxX=(w=n?.maxX)!==null&&w!==void 0?w:0,this.maxY=(C=n?.maxY)!==null&&C!==void 0?C:0}return o.new=function(n){var a=n.fit,d=n.alignment,m=n.minX,v=n.minY,w=n.maxX,C=n.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new o({fit:a,alignment:d,minX:m,minY:v,maxX:w,maxY:C})},o.prototype.copyWith=function(n){var a=n.fit,d=n.alignment,m=n.minX,v=n.minY,w=n.maxX,C=n.maxY;return new o({fit:a??this.fit,alignment:d??this.alignment,minX:m??this.minX,minY:v??this.minY,maxX:w??this.maxX,maxY:C??this.maxY})},o.prototype.runtimeFit=function(n){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var a;return this.fit===re.Cover?a=n.Fit.cover:this.fit===re.Contain?a=n.Fit.contain:this.fit===re.Fill?a=n.Fit.fill:this.fit===re.FitWidth?a=n.Fit.fitWidth:this.fit===re.FitHeight?a=n.Fit.fitHeight:this.fit===re.ScaleDown?a=n.Fit.scaleDown:a=n.Fit.none,this.cachedRuntimeFit=a,a},o.prototype.runtimeAlignment=function(n){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var a;return this.alignment===I.TopLeft?a=n.Alignment.topLeft:this.alignment===I.TopCenter?a=n.Alignment.topCenter:this.alignment===I.TopRight?a=n.Alignment.topRight:this.alignment===I.CenterLeft?a=n.Alignment.centerLeft:this.alignment===I.CenterRight?a=n.Alignment.centerRight:this.alignment===I.BottomLeft?a=n.Alignment.bottomLeft:this.alignment===I.BottomCenter?a=n.Alignment.bottomCenter:this.alignment===I.BottomRight?a=n.Alignment.bottomRight:a=n.Alignment.center,this.cachedRuntimeAlignment=a,a},o}(),fe=function(){function o(){}return o.loadRuntime=function(){Q.default({locateFile:function(){return o.wasmURL}}).then(function(n){var a;for(o.runtime=n;o.callBackQueue.length>0;)(a=o.callBackQueue.shift())===null||a===void 0||a(o.runtime)}).catch(function(){var n="https://cdn.jsdelivr.net/npm/".concat(X.name,"@").concat(X.version,"/rive.wasm");o.wasmURL.toLowerCase()!==n?(console.warn("Failed to load WASM from ".concat(o.wasmURL,", trying jsdelivr as a backup")),o.setWasmUrl(n),o.loadRuntime()):console.error("Could not load Rive WASM file from unpkg or jsdelivr, network connection may be down, or 	        you may need to call set a new WASM source via RuntimeLoader.setWasmUrl() and call 	        RuntimeLoader.loadRuntime() again")})},o.getInstance=function(n){o.isLoading||(o.isLoading=!0,o.loadRuntime()),o.runtime?n(o.runtime):o.callBackQueue.push(n)},o.awaitInstance=function(){return new Promise(function(n){return o.getInstance(function(a){return n(a)})})},o.setWasmUrl=function(n){o.wasmURL=n},o.isLoading=!1,o.callBackQueue=[],o.wasmURL="https://unpkg.com/".concat(X.name,"@").concat(X.version,"/rive.wasm"),o}(),Ce=function(){function o(n,a,d,m){this.animation=n,this.artboard=a,this.playing=m,this.loopCount=0,this.scrubTo=null,this.instance=new d.LinearAnimationInstance(n,a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){return this.instance.time},set:function(n){this.instance.time=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.scrubTo===null?this.instance.advance(n):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},o.prototype.apply=function(n){this.instance.apply(n)},Object.defineProperty(o.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.instance.delete()},o}(),ae;(function(o){o[o.Number=56]="Number",o[o.Trigger=58]="Trigger",o[o.Boolean=59]="Boolean"})(ae||(ae={}));var me=function(){function o(n,a){this.type=n,this.runtimeInput=a}return Object.defineProperty(o.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(n){this.runtimeInput.value=n},enumerable:!1,configurable:!0}),o.prototype.fire=function(){this.type===ae.Trigger&&this.runtimeInput.fire()},o}(),he;(function(o){o[o.General=128]="General",o[o.OpenUrl=131]="OpenUrl"})(he||(he={}));var Ie=function(){function o(n,a,d,m){this.stateMachine=n,this.playing=d,this.artboard=m,this.inputs=[],this.instance=new a.StateMachineInstance(n,m),this.initInputs(a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"statesChanged",{get:function(){for(var n=[],a=0;a<this.instance.stateChangedCount();a++)n.push(this.instance.stateChangedNameByIndex(a));return n},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.instance.advance(n)},o.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},o.prototype.reportedEventAt=function(n){return this.instance.reportedEventAt(n)},o.prototype.initInputs=function(n){for(var a=0;a<this.instance.inputCount();a++){var d=this.instance.input(a);this.inputs.push(this.mapRuntimeInput(d,n))}},o.prototype.mapRuntimeInput=function(n,a){if(n.type===a.SMIInput.bool)return new me(ae.Boolean,n.asBool());if(n.type===a.SMIInput.number)return new me(ae.Number,n.asNumber());if(n.type===a.SMIInput.trigger)return new me(ae.Trigger,n.asTrigger())},o.prototype.cleanup=function(){this.instance.delete()},o}(),Ze=function(){function o(n,a,d,m,v){m===void 0&&(m=[]),v===void 0&&(v=[]),this.runtime=n,this.artboard=a,this.eventManager=d,this.animations=m,this.stateMachines=v}return o.prototype.add=function(n,a,d){if(d===void 0&&(d=!0),n=ie(n),n.length===0)this.animations.forEach(function(N){return N.playing=a}),this.stateMachines.forEach(function(N){return N.playing=a});else for(var m=this.animations.map(function(N){return N.name}),v=this.stateMachines.map(function(N){return N.name}),w=0;w<n.length;w++){var C=m.indexOf(n[w]),F=v.indexOf(n[w]);if(C>=0||F>=0)C>=0?this.animations[C].playing=a:this.stateMachines[F].playing=a;else{var R=this.artboard.animationByName(n[w]);if(R){var U=new Ce(R,this.artboard,this.runtime,a);U.advance(0),U.apply(1),this.animations.push(U)}else{var q=this.artboard.stateMachineByName(n[w]);if(q){var ee=new Ie(q,this.runtime,a,this.artboard);this.stateMachines.push(ee)}}}}return d&&(a?this.eventManager.fire({type:L.Play,data:this.playing}):this.eventManager.fire({type:L.Pause,data:this.paused})),a?this.playing:this.paused},o.prototype.play=function(n){return this.add(n,!0)},o.prototype.pause=function(n){return this.add(n,!1)},o.prototype.scrub=function(n,a){var d=this.animations.filter(function(m){return n.includes(m.name)});return d.forEach(function(m){return m.scrubTo=a}),d.map(function(m){return m.name})},Object.defineProperty(o.prototype,"playing",{get:function(){return this.animations.filter(function(n){return n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paused",{get:function(){return this.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),o.prototype.stop=function(n){var a=this;n=ie(n);var d=[];if(n.length===0)d=this.animations.map(function(w){return w.name}).concat(this.stateMachines.map(function(w){return w.name})),this.animations.forEach(function(w){return w.cleanup()}),this.stateMachines.forEach(function(w){return w.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var m=this.animations.filter(function(w){return n.includes(w.name)});m.forEach(function(w){w.cleanup(),a.animations.splice(a.animations.indexOf(w),1)});var v=this.stateMachines.filter(function(w){return n.includes(w.name)});v.forEach(function(w){w.cleanup(),a.stateMachines.splice(a.stateMachines.indexOf(w),1)}),d=m.map(function(w){return w.name}).concat(v.map(function(w){return w.name}))}return this.eventManager.fire({type:L.Stop,data:d}),d},Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(n,a){return n||a.playing},!1)||this.stateMachines.reduce(function(n,a){return n||a.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),o.prototype.atLeastOne=function(n,a){a===void 0&&(a=!0);var d;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([d=this.artboard.animationByIndex(0).name],n,a):this.artboard.stateMachineCount()>0&&this.add([d=this.artboard.stateMachineByIndex(0).name],n,a)),d},o.prototype.handleLooping=function(){for(var n=0,a=this.animations.filter(function(m){return m.playing});n<a.length;n++){var d=a[n];d.loopValue===0&&d.loopCount?(d.loopCount=0,this.stop(d.name)):d.loopValue===1&&d.loopCount?(this.eventManager.fire({type:L.Loop,data:{animation:d.name,type:D.Loop}}),d.loopCount=0):d.loopValue===2&&d.loopCount>1&&(this.eventManager.fire({type:L.Loop,data:{animation:d.name,type:D.PingPong}}),d.loopCount=0)}},o.prototype.handleStateChanges=function(){for(var n=[],a=0,d=this.stateMachines.filter(function(v){return v.playing});a<d.length;a++){var m=d[a];n.push.apply(n,m.statesChanged)}n.length>0&&this.eventManager.fire({type:L.StateChange,data:n})},o.prototype.handleAdvancing=function(n){this.eventManager.fire({type:L.Advance,data:n})},o}(),L;(function(o){o.Load="load",o.LoadError="loaderror",o.Play="play",o.Pause="pause",o.Stop="stop",o.Loop="loop",o.Draw="draw",o.Advance="advance",o.StateChange="statechange",o.RiveEvent="riveevent"})(L||(L={}));var D;(function(o){o.OneShot="oneshot",o.Loop="loop",o.PingPong="pingpong"})(D||(D={}));var ge=function(){function o(n){n===void 0&&(n=[]),this.listeners=n}return o.prototype.getListeners=function(n){return this.listeners.filter(function(a){return a.type===n})},o.prototype.add=function(n){this.listeners.includes(n)||this.listeners.push(n)},o.prototype.remove=function(n){for(var a=0;a<this.listeners.length;a++){var d=this.listeners[a];if(d.type===n.type&&d.callback===n.callback){this.listeners.splice(a,1);break}}},o.prototype.removeAll=function(n){var a=this;n?this.listeners.filter(function(d){return d.type===n}).forEach(function(d){return a.remove(d)}):this.listeners.splice(0,this.listeners.length)},o.prototype.fire=function(n){var a=this.getListeners(n.type);a.forEach(function(d){return d.callback(n)})},o}(),J=function(){function o(n){this.eventManager=n,this.queue=[]}return o.prototype.add=function(n){this.queue.push(n)},o.prototype.process=function(){for(;this.queue.length>0;){var n=this.queue.shift();n?.action&&n.action(),n?.event&&this.eventManager.fire(n.event)}},o}(),Fe=function(){function o(n){var a;this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.durations=[],this.frameTimes=[],this.frameCount=0,this.renderSecondTimer=0,this.canvas=n.canvas,this.src=n.src,this.buffer=n.buffer,this.layout=(a=n.layout)!==null&&a!==void 0?a:new c,this.shouldDisableRiveListeners=!!n.shouldDisableRiveListeners,this.automaticallyHandleEvents=!!n.automaticallyHandleEvents,this.eventManager=new ge,n.onLoad&&this.on(L.Load,n.onLoad),n.onLoadError&&this.on(L.LoadError,n.onLoadError),n.onPlay&&this.on(L.Play,n.onPlay),n.onPause&&this.on(L.Pause,n.onPause),n.onStop&&this.on(L.Stop,n.onStop),n.onLoop&&this.on(L.Loop,n.onLoop),n.onStateChange&&this.on(L.StateChange,n.onStateChange),n.onAdvance&&this.on(L.Advance,n.onAdvance),n.onload&&!n.onLoad&&this.on(L.Load,n.onload),n.onloaderror&&!n.onLoadError&&this.on(L.LoadError,n.onloaderror),n.onplay&&!n.onPlay&&this.on(L.Play,n.onplay),n.onpause&&!n.onPause&&this.on(L.Pause,n.onpause),n.onstop&&!n.onStop&&this.on(L.Stop,n.onstop),n.onloop&&!n.onLoop&&this.on(L.Loop,n.onloop),n.onstatechange&&!n.onStateChange&&this.on(L.StateChange,n.onstatechange),this.taskQueue=new J(this.eventManager),this.init({src:this.src,buffer:this.buffer,autoplay:n.autoplay,animations:n.animations,stateMachines:n.stateMachines,artboard:n.artboard,useOffscreenRenderer:n.useOffscreenRenderer})}return o.new=function(n){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new o(n)},o.prototype.init=function(n){var a=this,d=n.src,m=n.buffer,v=n.animations,w=n.stateMachines,C=n.artboard,F=n.autoplay,R=F===void 0?!1:F,U=n.useOffscreenRenderer,q=U===void 0?!1:U;if(this.src=d,this.buffer=m,!this.src&&!this.buffer)throw new Error(o.missingErrorMessage);var ee=ie(v),N=ie(w);this.loaded=!1,this.readyForPlaying=!1,fe.awaitInstance().then(function(Re){a.runtime=Re,a.renderer=a.runtime.makeRenderer(a.canvas,q),a.canvas.width||a.canvas.height||a.resizeDrawingSurfaceToCanvas(),a.initData(C,ee,N,R).then(function(){return a.setupRiveListeners()}).catch(function(Pe){console.error(Pe)})}).catch(function(Re){console.error(Re)})},o.prototype.setupRiveListeners=function(){var n=this;if(!this.shouldDisableRiveListeners){var a=(this.animator.stateMachines||[]).filter(function(d){return d.playing&&n.runtime.hasListeners(d.instance)}).map(function(d){return d.instance});this.eventCleanup=(0,Z.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:a,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime)})}},o.prototype.initData=function(n,a,d,m){var v;return le(this,void 0,void 0,function(){var w,C,F;return Xe(this,function(R){switch(R.label){case 0:return this.src?(w=this,[4,Ye(this.src)]):[3,2];case 1:w.buffer=R.sent(),R.label=2;case 2:return C=this,[4,this.runtime.load(new Uint8Array(this.buffer))];case 3:return C.file=R.sent(),this.file?(this.initArtboard(n,a,d,m),this.loaded=!0,this.eventManager.fire({type:L.Load,data:(v=this.src)!==null&&v!==void 0?v:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()]):(F="Problem loading file; may be corrupt!",console.warn(F),this.eventManager.fire({type:L.LoadError,data:F}),[2,Promise.reject(F)])}})})},o.prototype.initArtboard=function(n,a,d,m){var v=n?this.file.artboardByName(n):this.file.defaultArtboard();if(!v){var w="Invalid artboard name or no default artboard";console.warn(w),this.eventManager.fire({type:L.LoadError,data:w});return}if(this.artboard=v,this.artboard.animationCount()<1){var w="Artboard has no animations";throw this.eventManager.fire({type:L.LoadError,data:w}),w}this.animator=new Ze(this.runtime,this.artboard,this.eventManager);var C;a.length>0||d.length>0?(C=a.concat(d),this.animator.add(C,m,!1)):C=[this.animator.atLeastOne(m,!1)],this.taskQueue.add({event:{type:m?L.Play:L.Pause,data:C}})},o.prototype.drawFrame=function(){this.startRendering()},o.prototype.draw=function(n,a){var d=performance.now();this.frameRequestId=null,this.lastRenderTime||(this.lastRenderTime=n),this.renderSecondTimer+=n-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,a?.());var m=(n-this.lastRenderTime)/1e3;this.lastRenderTime=n;for(var v=this.animator.animations.filter(function(se){return se.playing||se.needsScrub}).sort(function(se){return se.needsScrub?-1:1}),w=0,C=v;w<C.length;w++){var F=C[w];F.advance(m),F.instance.didLoop&&(F.loopCount+=1),F.apply(1)}for(var R=this.animator.stateMachines.filter(function(se){return se.playing}),U=0,q=R;U<q.length;U++){var ee=q[U],N=ee.reportedEventCount();if(N)for(var Re=0;Re<N;Re++){var Pe=ee.reportedEventAt(Re);if(Pe)if(Pe.type===he.OpenUrl){if(this.eventManager.fire({type:L.RiveEvent,data:Pe}),this.automaticallyHandleEvents){var Ne=document.createElement("a"),at=Pe,ye=at.url,$e=at.target;ye&&Ne.setAttribute("href",ye),$e&&Ne.setAttribute("target",$e),ye&&Ne.click()}}else this.eventManager.fire({type:L.RiveEvent,data:Pe})}ee.advance(m)}this.artboard.advance(m);var Me=this.renderer;Me.clear(),Me.save(),this.alignRenderer(),this.artboard.draw(Me),Me.restore(),Me.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(m),this.frameCount++;var He=performance.now();for(this.frameTimes.push(He),this.durations.push(He-d);this.frameTimes[0]<=He-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},o.prototype.alignRenderer=function(){var n=this,a=n.renderer,d=n.runtime,m=n._layout,v=n.artboard;a.align(m.runtimeFit(d),m.runtimeAlignment(d),{minX:m.minX,minY:m.minY,maxX:m.maxX,maxY:m.maxY},v.bounds)},Object.defineProperty(o.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(n,a){return n+a},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){var n,a;this.stopRendering(),this.cleanupInstances(),(n=this.renderer)===null||n===void 0||n.delete(),this.renderer=null,(a=this.file)===null||a===void 0||a.delete(),this.file=null},o.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},o.prototype.retrieveTextRun=function(n){var a;if(!n){console.warn("No text run name provided");return}if(!this.artboard){console.warn("Tried to access text run, but the Artboard is null");return}var d=this.artboard.textRun(n);if(!d){console.warn("Could not access a text run with name '".concat(n,"' in the '").concat((a=this.artboard)===null||a===void 0?void 0:a.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."));return}return d},o.prototype.getTextRunValue=function(n){var a=this.retrieveTextRun(n);return a?a.text:void 0},o.prototype.setTextRunValue=function(n,a){var d=this.retrieveTextRun(n);d&&(d.text=a)},o.prototype.play=function(n,a){var d=this;if(n=ie(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return d.play(n,a)}});return}this.animator.play(n),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()},o.prototype.pause=function(n){var a=this;if(n=ie(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.pause(n)}});return}this.eventCleanup&&this.eventCleanup(),this.animator.pause(n)},o.prototype.scrub=function(n,a){var d=this;if(n=ie(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return d.scrub(n,a)}});return}this.animator.scrub(n,a||0),this.drawFrame()},o.prototype.stop=function(n){var a=this;if(n=ie(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.stop(n)}});return}this.animator.stop(n),this.eventCleanup&&this.eventCleanup()},o.prototype.reset=function(n){var a,d=n?.artboard,m=ie(n?.animations),v=ie(n?.stateMachines),w=(a=n?.autoplay)!==null&&a!==void 0?a:!1;this.cleanupInstances(),this.initArtboard(d,m,v,w),this.taskQueue.process()},o.prototype.load=function(n){this.stop(),this.init(n)},Object.defineProperty(o.prototype,"layout",{get:function(){return this._layout},set:function(n){this._layout=n,(!n.maxX||!n.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),o.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},o.prototype.resizeDrawingSurfaceToCanvas=function(){if(this.canvas instanceof HTMLCanvasElement&&window){var n=this.canvas.getBoundingClientRect(),a=n.width,d=n.height,m=window.devicePixelRatio||1;this.canvas.width=m*a,this.canvas.height=m*d,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(o.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"animationNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.animationCount();a++)n.push(this.artboard.animationByIndex(a).name);return n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stateMachineNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.stateMachineCount();a++)n.push(this.artboard.stateMachineByIndex(a).name);return n},enumerable:!1,configurable:!0}),o.prototype.stateMachineInputs=function(n){if(this.loaded){var a=this.animator.stateMachines.find(function(d){return d.name===n});return a?.inputs}},Object.defineProperty(o.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),o.prototype.on=function(n,a){this.eventManager.add({type:n,callback:a})},o.prototype.off=function(n,a){this.eventManager.remove({type:n,callback:a})},o.prototype.unsubscribe=function(n,a){console.warn("This function is deprecated: please use `off()` instead."),this.off(n,a)},o.prototype.removeAllRiveEventListeners=function(n){this.eventManager.removeAll(n)},o.prototype.unsubscribeAll=function(n){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(n)},o.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},o.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},o.prototype.enableFPSCounter=function(n){this.runtime.enableFPSCounter(n)},o.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(o.prototype,"contents",{get:function(){if(this.loaded){for(var n={artboards:[]},a=0;a<this.file.artboardCount();a++){for(var d=this.file.artboardByIndex(a),m={name:d.name,animations:[],stateMachines:[]},v=0;v<d.animationCount();v++){var w=d.animationByIndex(v);m.animations.push(w.name)}for(var C=0;C<d.stateMachineCount();C++){for(var F=d.stateMachineByIndex(C),R=F.name,U=new this.runtime.StateMachineInstance(F,d),q=[],ee=0;ee<U.inputCount();ee++){var N=U.input(ee);q.push({name:N.name,type:N.type})}m.stateMachines.push({name:R,inputs:q})}n.artboards.push(m)}return n}},enumerable:!1,configurable:!0}),o.missingErrorMessage="Rive source file or data buffer required",o}(),Ye=function(o){return le(void 0,void 0,void 0,function(){var n,a,d;return Xe(this,function(m){switch(m.label){case 0:return n=new Request(o),[4,fetch(n)];case 1:return a=m.sent(),[4,a.arrayBuffer()];case 2:return d=m.sent(),[2,d]}})})},ie=function(o){return typeof o=="string"?[o]:o instanceof Array?o:[]},we={EventManager:ge,TaskQueueManager:J}})(),ve})())})(cn);var ln=cn.exports;const Dn=kn("<div>");ln.RuntimeLoader.setWasmUrl(Wn);const Zn=({src:wt,width:qe,height:ke})=>{const oe=document.createElement("canvas");oe.width=qe*window.devicePixelRatio,oe.height=ke*window.devicePixelRatio,oe.style.width=`var(--width, ${qe+"px"})`,oe.style.height=`var(--height, ${ke+"px"})`;const G=document.createElement("canvas");G.width=qe*window.devicePixelRatio,G.height=ke*window.devicePixelRatio,G.style.width=`var(--width, ${qe+"px"})`,G.style.height=`var(--height, ${ke+"px"})`;const ve=G.getContext("2d"),[Q,X]=Yn(!1);new ln.Rive({src:wt,canvas:oe,autoplay:!0,onLoad(){X(!0)}});function Z(){ve.clearRect(0,0,oe.width,oe.height),ve.globalAlpha=.5,ve.filter="blur(15px)",ve.drawImage(oe,0,0),ve.globalAlpha=1,ve.filter="blur(0px)",ve.drawImage(oe,0,0),requestAnimationFrame(Z)}return Z(),(()=>{const le=$n(Dn);return jn(le,`rive ${Q?"":"hidden"}`),Un(le,G),le})()};export{Zn as default};
